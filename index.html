<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ben There Bet That | Sports Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="script.js" defer></script>
</head>

<body>
  <!-- Navbar -->
  <header class="navbar">
    <h1>Ben There Bet That!</h1>
    <div>
      <button id="signout-btn" class="nav-btn">Sign Out</button>
    </div>
  </header>

  <!-- Authentication Section -->
  <div id="auth-container">
    <div class="auth-card">
      <h2>Welcome</h2>
      <p>Sign in or create your account to continue.</p>

      <!-- Sign In Form -->
      <form id="signin-form" class="auth-form">
        <h3>Sign In</h3>
        <input type="email" id="signin-email" placeholder="Email" required />
        <input type="password" id="signin-password" placeholder="Password" required />
        <button type="submit" class="primary-btn">Sign In</button>
        <div id="signin-spinner" class="spinner" style="display:none;"></div>
      </form>

      <div class="divider">OR</div>

      <!-- Sign Up Form -->
      <form id="signup-form" class="auth-form">
        <h3>Create Account</h3>
        <input type="email" id="signup-email" placeholder="Email" required />
        <input type="password" id="signup-password" placeholder="Password" required />
        <button type="submit" class="secondary-btn">Sign Up</button>
        <div id="signup-spinner" class="spinner" style="display:none;"></div>
      </form>

      <button id="forgot-btn" class="link-btn">Forgot Password?</button>
      <div id="forgot-spinner" class="spinner" style="display:none;"></div>

      <p id="auth-message"></p>
    </div>
  </div>

  <!-- Main Content -->
  <main id="main-content" style="display:none;">
    <div class="section">
      <div class="header-row">
        <p id="subscription-status">Checking subscription...</p>
        <button id="subscribeBtn" class="secondary-btn" style="display:none;">Subscribe</button>
      </div>
    </div>

    <div class="section">
      <h2>Choose a Sport</h2>
      <div class="sport-buttons">
        <button data-sport="americanfootball_nfl">NFL</button>
        <button data-sport="americanfootball_ncaaf">NCAAF</button>
        <button data-sport="basketball_nba">NBA</button>
        <button data-sport="icehockey_nhl">NHL</button>
        <button data-sport="baseball_mlb">MLB</button>
      </div>
    </div>

    <!-- Market Section -->
    <div class="section">
      <h2>Market Selection</h2>
      <div id="market-container"></div>
    </div>

    <!-- Controls -->
    <div class="section">
      <h2>Data Controls</h2>
      <div class="controls">
        <input type="date" id="dateInput" />
        <button id="loadData" class="primary-btn">Load Data</button>
        <button id="stopBtn" class="secondary-btn">Stop</button>
        <button id="refreshBtn" class="secondary-btn">Refresh</button>
      </div>
    </div>

    <!-- Export -->
    <div class="section">
      <h2>Export Results</h2>
      <div class="export-buttons">
        <button id="exportCsv" class="secondary-btn">Export CSV</button>
        <button id="exportExcel" class="secondary-btn">Export Excel</button>
      </div>
    </div>

    <!-- Data Output -->
    <div class="section">
      <div id="loading" class="spinner" style="display:none;"></div>
      <div id="progressText"></div>
      <div id="results"></div>
    </div>
  </main>

  <footer class="footer">
    <p>© 2025 Ben There Bet That — All rights reserved</p>
  </footer>
</body>
</html>
