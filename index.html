<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ‚úÖ GOOGLE ANALYTICS TAG -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-4P3RSFRJ61"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag("js", new Date());
    gtag("config", "G-4P3RSFRJ61");
  </script>

  <meta charset="UTF-8" />

  <!-- üì± Fully responsive & zoomable viewport -->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=5.0, user-scalable=yes"
  />

  <title>Ben There Bet That!</title>

  <link rel="stylesheet" href="style.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap"
    rel="stylesheet"
  />

  <!-- ‚úÖ API base configuration -->
  <script>
    window.API_BASE =
      (location.hostname === "localhost" || location.hostname === "127.0.0.1")
        ? "http://127.0.0.1:5000"
        : "https://bentherebetthat-api.onrender.com";
  </script>
</head>

<body>
  <!-- ‚úÖ Pick Tracker Bar -->
  <div id="pickTrackerBar" class="pick-tracker-bar hidden">
    ...
  </div>

  <!-- ===============================
       üîê Authentication Section
  =============================== -->
<div id="page-wrapper">

  <div id="auth-container">

    <!-- ===============================
         üî• Homepage Marketing
    =============================== -->
    <div class="auth-marketing">
      <div class="marketing-eyebrow">LIVE DFS LINE COMPARISON TOOL</div>

      <h1 class="marketing-headline">
        Build smarter PrizePicks &amp; Underdog slips using live Vegas odds
      </h1>

      <p class="marketing-subheadline">
        Compare real-time Vegas lines from 4 major sportsbooks against
        PrizePicks and Underdog Fantasy. Filter edges, auto-build slips,
        and track ROI.
      </p>

      <!-- ‚úÖ Promo badge (visible on mobile + desktop if not inside marketing-extra) -->
      <div class="promo-badge">
        <div class="promo-eyebrow">EARLY ACCESS with Promo Code</div>
        <div class="promo-code">BETTHAT</div>
        <div class="promo-subtext">First month FREE ‚Ä¢ Cancel anytime</div>
      </div>

      <!-- Desktop-only details (if your CSS hides .marketing-extra on mobile) -->
      <div class="marketing-extra">
        <ul class="marketing-bullets">
          <li>Live Vegas odds from 4 major sportsbooks</li>
          <li>Instant comparison to PrizePicks &amp; Underdog Fantasy</li>
          <li>Smart filters to surface the best value props</li>
          <li>Auto-build slips in seconds</li>
          <li>Track picks, slips, ROI, and trends by sport</li>
        </ul>
      </div>
    </div>

    <!-- ===============================
         üîê Auth Card
    =============================== -->
    <div class="auth-card">
      <h1 class="app-title">
        <span class="app-highlight">Ben</span> There
        <span class="app-highlight">Bet</span> That<span class="app-dot">!</span>
      </h1>

      <p class="app-subtitle">Smart Sports Insights ‚Ä¢ Real-Time Edge</p>

      <!-- Sign In Form -->
      <form id="signin-form" class="auth-form">
        <h2>Sign In</h2>
        <input type="email" id="signin-email" placeholder="Email" required />
        <input type="password" id="signin-password" placeholder="Password" required />
        <button type="submit" id="signin-btn" class="primary-btn">
          Sign In
          <span id="signin-spinner" class="spinner" style="display:none;"></span>
        </button>
      </form>

      <div class="divider">OR</div>

      <!-- Sign Up Form -->
      <form id="signup-form" class="auth-form">
        <h2>Create Account</h2>
        <input type="email" id="signup-email" placeholder="Email" required />
        <input type="password" id="signup-password" placeholder="Password" required />
        <input type="password" id="signup-confirm" placeholder="Confirm Password" required />
        <button type="submit" id="signup-btn" class="secondary-btn">
          Sign Up
          <span id="signup-spinner" class="spinner" style="display:none;"></span>
        </button>
      </form>

      <button id="forgot-btn" class="link-btn">Forgot Password?</button>
      <p id="auth-message"></p>

      <!-- ‚úÖ Disclaimer inside auth card -->
      <p class="login-disclaimer">
        <strong>Disclaimer:</strong> Ben There Bet That provides sports analytics and statistics dashboards
        for informational and entertainment purposes only. We do not accept wagers, offer fantasy contests,
        or facilitate real-money gaming of any kind.
      </p>
    </div>
  </div>
  <!-- ‚úÖ END #auth-container -->

  <!-- ===============================
       üèüÔ∏è Main Dashboard
  =============================== -->
  <div id="main-content" style="display:none;">

    <!-- üí≥ Subscription Management Section -->
    <div id="subscription-container" style="text-align:center; margin-top: 20px;">
      <h2 class="app-subtitle">Your Subscription</h2>

      <p id="subscription-status" style="font-weight:600; font-size:1.1rem; color:#222;">
        Subscription: Unknown
      </p>
      <p id="access-until" style="display:none; color:#0d6efd; font-weight:600;"></p>

      <div id="subscription-controls" style="margin-top:12px;">
        <button id="subscribeBtn" class="primary-btn" style="display:none;">Subscribe</button>
        <button id="cancel-subscription-btn" class="secondary-btn" style="display:none;">Cancel Subscription</button>
        <button id="resume-subscription-btn" class="primary-btn" style="display:none;">Resume Subscription</button>
        <button id="manageBillingBtn" class="primary-btn" style="display:none;">Manage Billing</button>

        <button id="signout-btn" class="secondary-btn button-with-spinner">
          Sign Out
          <div id="logout-spinner" class="spinner-small" style="display:none;"></div>
        </button>

        <button id="support-btn" class="secondary-btn">Contact Support</button>
      </div>
    </div>

    <!-- Title -->
    <h1 class="app-title">
      Ben There <span class="app-highlight">Bet That<span class="app-dot">!</span></span>
    </h1>
    <h2 class="app-subtitle">Smart Sports Insights ‚Ä¢ Real-Time Edge</h2>

    <!-- Sport Buttons -->
    <div class="sport-buttons">
      <button data-sport="americanfootball_nfl">NFL</button>
      <button data-sport="americanfootball_ncaaf">NCAAF</button>
      <button data-sport="basketball_nba">NBA</button>
      <button data-sport="basketball_ncaab">NCAAB</button>
      <button data-sport="baseball_mlb">MLB</button>
      <button data-sport="icehockey_nhl">NHL</button>
      <button id="openPickTrackerBtn">üìä Pick Tracker</button>
    </div>

    <!-- üèüÔ∏è Game Selector -->
    <div id="gameFilterContainer" style="display:none; margin:15px 0;">
      <label for="gameFilter" style="font-weight:600;">Select Games:</label>
      <div style="display:flex; align-items:center; gap:10px; margin-top:6px;">
        <input
          type="text"
          id="gameSearch"
          placeholder="Type to search..."
          style="flex:1; padding:6px; border-radius:6px; border:1px solid #ccc;"
        />
        <button id="selectAllGames" class="primary-btn" style="padding:6px 12px;">Select All</button>
        <button id="deselectAllGames" class="secondary-btn" style="padding:6px 12px;">Deselect</button>
      </div>
      <div id="gameButtonContainer" class="game-tiles" style="margin-top:10px;"></div>
    </div>

    <!-- Date Controls -->
    <div class="controls date-controls">
      <label for="dateInput" class="date-label"><span>üìÖ Select Date</span></label>
      <input type="date" id="dateInput" />
      <button id="loadData" class="primary-btn">Load Data</button>
      <button id="refreshBtn" class="secondary-btn">Refresh Data</button>
      <button id="stopBtn" class="secondary-btn">Stop</button>
    </div>

    <!-- üè∑Ô∏è Market Sections -->
    <div id="market-sections">
      <div id="americanfootball_nflMarkets" class="market-buttons" style="display:none;">
        <h3>NFL Markets</h3>
        <div class="market-actions">
          <button id="selectAllNFL" class="select-all-btn">Select All</button>
          <button id="deselectAllNFL" class="deselect-all-btn">Deselect All</button>
        </div>
        <div class="market-list"></div>
      </div>

      <div id="americanfootball_ncaafMarkets" class="market-buttons" style="display:none;">
        <h3>NCAAF Markets</h3>
        <div class="market-actions">
          <button id="selectAllNCAAF" class="select-all-btn">Select All</button>
          <button id="deselectAllNCAAF" class="deselect-all-btn">Deselect All</button>
        </div>
        <div class="market-list"></div>
      </div>

      <div id="basketball_nbaMarkets" class="market-buttons" style="display:none;">
        <h3>NBA Markets</h3>
        <div class="market-actions">
          <button id="selectAllNBA" class="select-all-btn">Select All</button>
          <button id="deselectAllNBA" class="deselect-all-btn">Deselect All</button>
        </div>
        <div class="market-list"></div>
      </div>

      <div id="basketball_ncaabMarkets" class="market-buttons" style="display:none;">
        <h3>NCAAB Markets</h3>
        <div class="market-actions">
          <button id="selectAllNCAAB" class="select-all-btn">Select All</button>
          <button id="deselectAllNCAAB" class="deselect-all-btn">Deselect All</button>
        </div>
        <div class="market-list"></div>
      </div>

      <div id="baseball_mlbMarkets" class="market-buttons" style="display:none;">
        <h3>MLB Markets</h3>
        <div class="market-actions">
          <button id="selectAllMLB" class="select-all-btn">Select All</button>
          <button id="deselectAllMLB" class="deselect-all-btn">Deselect All</button>
        </div>
        <div class="market-list"></div>
      </div>

      <div id="icehockey_nhlMarkets" class="market-buttons" style="display:none;">
        <h3>NHL Markets</h3>
        <div class="market-actions">
          <button id="selectAllHockey" class="select-all-btn">Select All</button>
          <button id="deselectAllHockey" class="deselect-all-btn">Deselect All</button>
        </div>
        <div class="market-list"></div>
      </div>
    </div>

    <!-- üß© Header Actions -->
    <div id="header-container" style="position: sticky; top: 0; z-index: 10; background-color: #fff; padding: 10px;">
      <div class="export-buttons" style="display: flex; justify-content: flex-start; gap: 10px; align-items: center;">
        <button id="exportCsv">Export CSV</button>
        <button id="exportExcel">Export Excel</button>
        <button id="factCheckBtn" class="fact-check-toggle">üß† Fact Check Mode</button>
        <button id="columnInfoBtn" class="info-btn">‚ÑπÔ∏è Column Info</button>
        <button id="tapToCardBtn" class="info-btn">üìá Tap-to-Card View</button>
      </div>

      <div id="bookmaker-filters" class="dropdown-container">
        <label><input type="checkbox" value="Fanduel" checked> Fanduel</label>
        <label><input type="checkbox" value="DraftKings" checked> DraftKings</label>
        <label><input type="checkbox" value="BetMGM" checked> BetMGM</label>
        <label><input type="checkbox" value="Fanatics" checked> Fanatics</label>
      </div>

      <div id="consensus-summary" class="consensus-bar"></div>
    </div>

    <!-- ================================
         üéØ Optimal Bets Filter Controls
    ================================ -->
    <div id="optimalFilters" class="filter-group">
      <button id="filterPrizePicksOptimalBtn" class="filter-btn"
              title="Show PrizePicks lines with the strongest positive expected value">
        üìà PrizePicks +EV
      </button>

      <button id="filterUnderdogOptimalBtn" class="filter-btn"
              title="Show Underdog lines with the strongest positive expected value">
        üß© Underdog +EV
      </button>

      <button id="filterFantasyEdgeBtn" class="filter-btn"
              title="Highlights props with point descrepncies bettwen DFS and bookmakers">
        üéÆ Point Value Plays
      </button>

      <button id="filterHighNoVigBtn" class="filter-btn"
              title="Show bets with ‚â• 54% fair win probability (after removing vig)">
        üéØ High Confidence (54%+)
      </button>

      <button id="filterDfsDifferenceBtn" class="filter-btn"
              title="Show props where PrizePicks and Underdog lines differ by 2+ points">
        ‚öîÔ∏è DFS Line Difference (‚â• 2)
      </button>

      <button id="clearOptimalFiltersBtn" class="filter-btn secondary-btn"
              title="Reset all filters and show full results">
        ‚ôªÔ∏è Reset Filters
      </button>
    </div>

    <!-- ===================================================
         üéØ Pick Tracker Platform Selector
    =================================================== -->
    <div id="pickTrackerPlatform" class="pick-tracker-platform">
      <button id="pickTrackerPrizePicksBtn" class="tracker-platform-btn active">PrizePicks</button>
      <button id="pickTrackerUnderdogBtn" class="tracker-platform-btn">Underdog</button>
    </div>

    <!-- üßæ Results -->
    <div id="results"></div>
    <div id="loading">Loading data...</div>
    <div id="progressText"></div>

    <!-- ‚ú® Loading shimmer overlay -->
    <div id="shimmerOverlay" class="shimmer-overlay hidden">
      <div class="shimmer-bar"></div>
    </div>

    <!-- ===================================================
         üìò Dashboard Tutorial / Column Info Modal
         (Your modal content continues below...)
    =================================================== -->
    <!-- Keep everything you pasted here unchanged -->

  </div>
  <!-- ‚úÖ END #main-content -->

  <!-- ================================
       üìÑ Footer Disclaimer
  ================================ -->
  <footer class="site-footer">
    <p class="disclaimer">
      <strong>Disclaimer:</strong> Ben There Bet That provides sports analytics and statistics dashboards
      for informational and entertainment purposes only. We do not accept wagers, offer fantasy contests,
      or facilitate real-money gaming of any kind.
    </p>
    <p class="copyright">¬© 2025 Ben There Bet That. All rights reserved.</p>
  </footer>

  <!-- ===============================
       üìú Scripts
  =============================== -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
